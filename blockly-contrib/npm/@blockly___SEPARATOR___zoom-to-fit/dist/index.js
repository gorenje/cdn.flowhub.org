/*! For license information please see index.js.LICENSE.txt */
!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(require("blockly/core"));else if("function"==typeof define&&define.amd)define(["blockly/core"],i);else{var o="object"==typeof exports?i(require("blockly/core")):i(t.Blockly);for(var e in o)("object"==typeof exports?exports:t)[e]=o[e]}}(this,(t=>(()=>{"use strict";var i={573:i=>{i.exports=t}},o={};function e(t){var s=o[t];if(void 0!==s)return s.exports;var r=o[t]={exports:{}};return i[t](r,r.exports,e),r.exports}e.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},e.d=(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{e.r(s),e.d(s,{ZoomToFitControl:()=>i});var t=e(573);class i{constructor(t){this.workspace=t,this.id="zoomToFit",this.svgGroup=null,this.left=0,this.top=0,this.width=32,this.height=32,this.marginVertical=20,this.marginHorizontal=20,this.initialized=!1,this.onZoomToFitWrapper=null}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[t.ComponentManager.Capability.POSITIONABLE]}),this.createDom(),this.initialized=!0,this.workspace.resize()}dispose(){this.svgGroup&&t.utils.dom.removeNode(this.svgGroup),this.onZoomToFitWrapper&&(t.browserEvents.unbind(this.onZoomToFitWrapper),this.onZoomToFitWrapper=null)}createDom(){this.svgGroup=t.utils.dom.createSvgElement(t.utils.Svg.IMAGE,{height:`${this.height}px`,width:`${this.width}px`,class:"zoomToFit"}),this.svgGroup.setAttributeNS(t.utils.dom.XLINK_NS,"xlink:href",o),t.utils.dom.insertAfter(this.svgGroup,this.workspace.getBubbleCanvas()),this.onZoomToFitWrapper=t.browserEvents.conditionalBind(this.svgGroup,"pointerdown",null,this.onClick.bind(this))}onClick(i){this.workspace.zoomToFit();const o=new(t.Events.get(t.Events.CLICK))(null,this.workspace.id,"zoom_reset_control");t.Events.fire(o),i.stopPropagation(),i.preventDefault()}getBoundingRectangle(){return new t.utils.Rect(this.top,this.top+this.height,this.left,this.left+this.width)}position(i,o){var e;if(!this.initialized)return;const s=this.workspace.scrollbar&&this.workspace.scrollbar.canScrollHorizontally(),r=this.workspace.scrollbar&&this.workspace.scrollbar.canScrollVertically();i.toolboxMetrics.position===t.TOOLBOX_AT_LEFT||this.workspace.horizontalLayout&&!this.workspace.RTL?(this.left=i.absoluteMetrics.left+i.viewMetrics.width-this.width-this.marginHorizontal,s&&!this.workspace.RTL&&(this.left-=t.Scrollbar.scrollbarThickness)):(this.left=this.marginHorizontal,s&&this.workspace.RTL&&(this.left+=t.Scrollbar.scrollbarThickness));const n=i.toolboxMetrics.position!==t.TOOLBOX_AT_BOTTOM;n?(this.top=i.absoluteMetrics.top+i.viewMetrics.height-this.height-this.marginVertical,r&&(this.top-=t.Scrollbar.scrollbarThickness)):this.top=i.absoluteMetrics.top+this.marginVertical;let l=this.getBoundingRectangle();for(let t,i=0;t=o[i];i++)l.intersects(t)&&(this.top=n?t.top-this.height-this.marginVertical:t.bottom+this.marginVertical,l=this.getBoundingRectangle(),i=-1);null===(e=this.svgGroup)||void 0===e||e.setAttribute("transform",`translate(${this.left}, ${this.top})`)}}const o="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzU0NkU3QSI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTUgNi40Mkw4LjA5IDkuNSA5LjUgOC4wOSA2LjQxIDVIOVYzSDN2Nmgyem0xMC0zLjQxdjJoMi41N0wxNC41IDguMDlsMS40MSAxLjQxTDE5IDYuNDFWOWgyVjMuMDF6bTQgMTQuNTdsLTMuMDktMy4wOC0xLjQxIDEuNDFMMTcuNTkgMTlIMTV2Mmg2di02aC0yek04LjA5IDE0LjVMNSAxNy41OVYxNUgzdjZoNnYtMkg2LjQybDMuMDgtMy4wOXoiLz48L3N2Zz4=";t.Css.register("\n.zoomToFit {\n  opacity: 0.4;\n}\n.zoomToFit:hover {\n  opacity: 0.6;\n}\n.zoomToFit:active {\n  opacity: 0.8;\n}\n")})(),s})()));
//# sourceMappingURL=index.js.map